pre-commit:
  parallel: true
  jobs:
    - glob: '*.{js,ts,tsx}'
      group:
        jobs:
          - run: pnpm biome check --write {staged_files}
            stage_fixed: true
          - run: pnpm prettier --write {staged_files}
            stage_fixed: true
    - exclude: '*.{js,ts,tsx}'
      run: pnpm prettier --write --ignore-unknown {staged_files}
      stage_fixed: true

pre-push:
  parallel: true
  jobs:
    - run: pnpm lefthook validate
    - run: pnpm run lint
    - run: pnpm run pretty
    - run: pnpm run typecheck
    - run: pnpm run test
      env:
        CI: 'true'
    - group:
        piped: true
        jobs:
          - run: pnpm run build --logLevel=silent
          - run: pnpm run test:e2e
